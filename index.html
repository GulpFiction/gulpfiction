<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Gulp Fiction</title>
        <link rel="stylesheet" href="app.css" />
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/zeroclipboard/1.1.7/ZeroClipboard.min.js"></script>
        <script type="text/javascript">
          (function(d) {
            var config = {
              kitId: 'spc1sua',
              scriptTimeout: 3000
            },
            h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='//use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
          })(document);
        </script>
        <script src="components.js"></script>
        <script src="app.js"></script>
        <script src="views.js"></script>
        <link rel="icon" type="image/gif" href="/img/logo.gif?v=2" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    </head>

    <body ng-app="app" ng-controller="appController" ng-class="{'show-help': showsHelp }">
        <keyup-events></keyup-events>
        <header>

            <h1>
                <a ng-click="showsTeaser = true;">
                    <div class="logo">
                        <img src="/img/logo.gif">
                        <span class="gulp">Gulp</span>
                        <span class="fiction">Fiction</span>
                    </div>
                </a>
            </h1>

            <project-picker projects="projects" current-project="project" on-switch-project="switchToProject(project)"></project-picker>

            <div class="options">
                <div class="options-project"
                data-tooltip="Project Actions"
                data-tooltip-options="left only-help">
                    <button ng-click="confirmDeleteProject()" data-tooltip-options="oneline bottom" data-tooltip="Remove project" data-tooltip-options="oneline"><i class="fa fa-times-circle"></i>
                    </button>

                    <button ng-click="openExportProject(project)" data-tooltip-options="oneline bottom" data-tooltip="Export gulpfile.js" data-tooltip-options="oneline"><i class="fa fa-cloud-download"></i>
                    </button>

                    <button ng-click="openExportToDropbox(project)" data-tooltip-options="oneline bottom" data-tooltip="Export gulpfile.js to Dropbox" data-tooltip-options="oneline"><i class="fa fa-dropbox"></i>
                    </button>
                </div>

                <div class="options-app"
                data-tooltip="App Actions"
                data-tooltip-options="bottom only-help oneline">
                    <button ng-click="addProject()" data-tooltip-options="oneline bottom" data-tooltip="Add project"><i class="fa fa-plus-circle"></i></button>
                    <button ng-click="toggleHelp()"><i class="fa fa-question-circle"></i></button>
                </div>
            </div>
        </header>

        <div ng-view></div>

        <lightbox is-active="showsTeaser" 
                show-close="true" 
                class="teaser" 
                on-close="closeTeaser()"
                custom-width="600">
            <div class="teaser-heading">
                <div class="logo">
                    <img src="/img/logo.gif">
                    <span class="gulp">Gulp</span>
                    <span class="fiction">Fiction</span>
                </div>
                <p>The Royale With Cheese for you build workflow.</p>
            </div>

            <ul>
                <li>Easy visual editing of your gulp file!</li>
                <li>Export your generated gulp file to your Dropbox account or copy it!</li>
                <li>Search for steps and build tasks!</li>
            </ul>

            <p>
                If you are a front-end developer like we are you might love setting up
                and maintaining the build workflow like we are. <i>Not at all</i>. Fiddeling
                around with <i>grunt</i> or the new and fancy <i>gulp.js</i> config files is 
                no fun so a lot of boilerplates were set up to help you. This is another 
                approach to enable you to <b>shorten the build setup</b> with a graphical user interface for <b>automatic gulp.js creation</b> and file upload for <b>dropbox</b> 
                or <b>direct download</b>.
            </p>

            <p>
                If you haven't heard of <a href="http://gulpjs.com/">gulp</a> &mdash; it's 
                like grunt just <i>a lot</i> faster.
                If you haven't heard of grunt... well... Nice weather out there, isnt it?
            </p>
        </lightbox>

        <lightbox is-active="showsDropboxExport" show-close="true">
            <h1>Want to use Dropbox? You're one smart motherfu<i class="fa fa-asterisk"></i><i class="fa fa-asterisk"></i><i class="fa fa-asterisk"></i>r.</h1>

            <span ng-if="isDropboxAuthenticated"> {{dbAccountInfo.display_name}} is connected <button ng-click="logoutDropbox()">Logout</button></span>

            <h3>You can use Dropbox to auto-update your local gulpfile on save.</h3>

            <button ng-if="!isDropboxAuthenticated" ng-click="connectDb()" class="button"><i class="fa fa-dropbox"></i>
                <span>Connect to Dropbox</span>
            </button>

            <div ng-hide="!isDropboxAuthenticated">
                <p>Great, now you need to setup the link on your local filesystem. Open Terminal and switch to your project directory, then execute the following command to create a symbolic link:</p>
                <pre><code>$ ln -s ~/Dropbox/gulp-fiction/{{project.id}}.js gulpfile.js</code></pre>
                <p>Now hit save to export to Dropbox!</p>
                <button style="font-size:2rem;" ng-show="isDropboxAuthenticated && !showExportProgress" ng-click="exportProjectToDropbox(project)" class="button">
                    <i class="fa fa-dropbox"></i> Save</button>

                <button ng-if="showExportProgress" disabled><i class="fa fa-spinner fa-spin" class="button"></i> Exporting…</button>

                <span ng-if="showExportDone"><i class="fa fa-check"></i> Saved</span>
            </div>
        </lightbox>


        <lightbox is-active="showsExport" show-close="true" class="full-height">
            <h1>Any time of the day is a good time for pie!</h1>
            <p>Copy the following code and paste it into a file named gulpfile.js in your project root.</p>
            <div class="export-left">
                <button clip-copy="currentExportContent">» Copy all content by clicking here «</button>
            </div>
            <div ui-ace readonly="true" ng-model="currentExportContent"></div>

        </lightbox>


        <confirm-lightbox   is-active="confirmDeleteProjectActive"
                            name="{{project.name}}"
                            custom-width="450"
                            on-confirm="removeProject(toDeleteItem)">
            <h1>Delete project {{name}}?</h1>
        </confirm-lightbox>

    </body>
</html>